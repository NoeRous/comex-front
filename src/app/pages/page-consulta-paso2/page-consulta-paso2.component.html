<div class="stepsdemo-content">
    <p-card>
        <ng-template pTemplate="title"> Paso 2 </ng-template>
        <ng-template pTemplate="subtitle"> Elija los valores </ng-template>
        <ng-template pTemplate="content">
            <div class="col-12">
            
                   <!-- <h5>Seccion NANDIA</h5>-->
                    <div class="p-fluid p-formgrid grid">
                          <div class="col-12">
                            <div class="card">
                              <h5>Clasificaciones</h5>
                              <div class="flex flex-column gap-2">
                                <!-- Listar checkboxes -->
                                <div *ngFor="let cualitativa of cualitativas.cualitativas" class="field-checkbox">
                                  <p-checkbox [label]="cualitativa.des" name="group" [value]="cualitativa" [(ngModel)]="selectedCualitativas"></p-checkbox>
                                  <br>
                                  <!-- Anidar radio buttons dentro de los checkboxes -->
                                  <div *ngIf="selectedCualitativas.includes(cualitativa)">
                                    <div *ngFor="let subCualitativa of cualitativa.children" class="field-checkbox">
                                        <div (click)="showModal()">
                                            <p-radioButton [inputId]="subCualitativa.des" name="subCualitativa" [value]="subCualitativa" [(ngModel)]="selectedSubCualitativas"></p-radioButton>
                                            <label [for]="subCualitativa.des"  class="ml-2">{{ subCualitativa.des }}</label>
                                        </div>
                                     
                                      <br>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                         <div class="col-12">
                            <div class="card">
                                <h5>Ubicación Geográfica</h5>
                                <div class="p-fluid p-formgrid grid">
                               
                                    <div class="field col-12 md:col-4">
                                        <label htmlFor="address">Departamento</label>
                                        <p-multiSelect display="chip" [options]="departamentos.departamentos" [(ngModel)]="selectedDepartamentos" optionLabel="des" placeholder="Seleccione departamento(s)"></p-multiSelect>
                                    </div>
                                    <div class="field col-12 md:col-4">
                                        <label htmlFor="city">Continente</label>
                                        <p-multiSelect display="chip" [options]="continentes.continentes" [(ngModel)]="selectedContinentes" optionLabel="des_continente" placeholder="Seleccione continente(s) "></p-multiSelect>
                                    </div>
                                    <div class="field col-12 md:col-4">
                                        <label htmlFor="state">País (Destino para Exportaciones)</label>
                                        <p-multiSelect display="chip" [options]="paises.paises" [(ngModel)]="selectedPaises" optionLabel="des" placeholder="Seleccione el pais "></p-multiSelect>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="card">
                                <h5>Otros</h5>
                                <div class="p-fluid p-formgrid grid">
                               
                                    <div class="field col-12 md:col-4">
                                        <label htmlFor="address">Medio de transporte </label>
                                        <p-multiSelect display="chip" [options]="medios.medios" [(ngModel)]="selectedMedios" optionLabel="des" placeholder="Seleccione medio(s)"></p-multiSelect>
                                    </div>
                                    <div class="field col-12 md:col-4">
                                        <label htmlFor="city">Via</label>
                                        <p-multiSelect display="chip" [options]="vias.vias" [(ngModel)]="selectedVias" optionLabel="des" placeholder="Seleccione via(s) "></p-multiSelect>
                                    </div>
                                    <div class="field col-12 md:col-4">
                                    </div>
                                </div>
                            </div>
                        </div> 
                    </div>
               
            </div>
        </ng-template>
        <ng-template pTemplate="footer">
            <div class="grid grid-nogutter justify-content-between">
                <p-button label="Anterior" (onClick)="prevPage()" icon="pi pi-angle-left"></p-button>
                <p-button label="Siguiente" (onClick)="nextPage()" icon="pi pi-angle-right" iconPos="right"></p-button>
            </div>
        </ng-template>
    </p-card>

   

</div>

<div>
    <p-dialog header="Datos de clasificaciones" [(visible)]="displayModal" [modal]="true" [responsive]="true" [maximizable]="true"[style]="{ width: '50vw', height: '300px' }" (onHide)="onDialogHide()">
        <div class="card">
            <p-table
              #dt2
              [value]="'departamentos.departamentos'"
              sortField="representative.name"
              sortMode="single"
              dataKey="representative.name"
              rowGroupMode="subheader"
              groupRowsBy="representative.name"
              [tableStyle]="{'min-width': '70rem'}"
              [globalFilterFields]="['name', 'country.name', 'representative.name', 'status']"
            >
              <ng-template pTemplate="caption">
                <div class="flex">
                  <span class="p-input-icon-left ml-auto">
                    <i class="pi pi-search"></i>
                    <input
                      pInputText
                      type="text"
                      (input)="dt2.filterGlobal($event.target.value, 'contains')"
                      placeholder="Busqueda..."
                    />
                  </span>
                </div>
              </ng-template>
              <ng-template pTemplate="header">
                <tr>
                  <th style="width: 20%"></th>
                  <th style="width: 20%">Código</th>
                  <th style="width: 20%">Descripción</th>
                </tr>
              </ng-template>
              <ng-template
                pTemplate="groupheader"
                let-customer
                let-rowIndex="rowIndex"
                let-expanded="expanded"
              >
                <tr>
                  <td colspan="5">
                    <button
                      type="button"
                      pButton
                      pRipple
                      [pRowToggler]="customer"
                      class="p-button-text p-button-rounded p-button-plain mr-2"
                      [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"
                    ></button>
                    <img
                      [alt]="customer.representative.name"
                      src="https://primefaces.org/cdn/primeng/images/demo/avatar/{{customer.representative.image}}"
                      width="32"
                      style="vertical-align: middle"
                    />
                    <span class="font-bold ml-2">{{customer.representative.name}}</span>
                  </td>
                </tr>
              </ng-template>
              <ng-template pTemplate="groupfooter" let-customer>
                <tr class="p-rowgroup-footer">
                  <td colspan="4" style="text-align: right">Total Customers</td>
                  <td>{{calculateCustomerTotal(customer.representative.name)}}</td>
                </tr>
              </ng-template>
              <ng-template pTemplate="rowexpansion" let-customer>
                <tr>
                  <td>{{customer.name}}</td>
                  <td>
                    <img
                      src="https://primefaces.org/cdn/primeng/images/demo/flag/flag_placeholder.png"
                      [class]="'flag flag-' + customer.country.code"
                      style="width: 20px"
                    />
                    <span class="ml-1 vertical-align-middle"
                      >{{customer.cod_departamento}}</span
                    >
                  </td>
                  <td>{{customer.company}}</td>
                  <td>
                    <p-tag
                      [value]="customer.status"
                      [severity]="getSeverity(customer.status)"
                    ></p-tag>
                  </td>
                  <td>{{customer.date}}</td>
                </tr>
              </ng-template>
            </p-table>
          </div>
          
    </p-dialog>
</div>